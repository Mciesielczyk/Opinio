<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="public/styles/header.css">
     <link rel="stylesheet" type="text/css" href="public/styles/Questions.css">
    <link rel="stylesheet" type="text/css" href="public/styles/Friends.css">
    <link rel="stylesheet" type="text/css" href="public/styles/Buttons.css">


</head>
<body>
    <?php include 'header.php'; ?>

    <div class="message">
        Znajomi
    </div>

    <form id="search" action="/friendsSearch" method="POST">
    <div class="searchbar">
        <input name="searchbar" placeholder="Szukaj znajomych">
        <button type="submit">SZUKAJ</button>
    </div>
    </form>

        <?php if (isset($searchTerm) && $searchTerm !== ''): ?>
    <div class = search-info>
            <p>Wyniki wyszukiwania dla: "<strong><?= htmlspecialchars($searchTerm); ?></strong>"</p>
            <a href = "/friends">Pokaż wszystkich znajomych</a>
    </div>
            <?php endif; ?>

<div class="friends-list">
        <ul>
            <?php foreach ($friends as $friend): ?>
                <li class="friend-card">
                    <img src="/public/uploads/avatars/<?= $friend['profile_picture'] ?>" alt="Profilowe">
                    
                    <div class="friend-info">
                        <span class="friend-name">
                            <?= htmlspecialchars($friend['name']) . ' ' . htmlspecialchars($friend['surname']); ?>
                        </span>
                        
                        <span class="friend-similarity">Podobieństwo: <?= $friend['similarity']; ?>%</span>

                        <div class="friend-axes">
                            <small>
                                L/P: <strong><?= number_format($friend['score_lewa_prawa'] ?? 0, 1) ?></strong> | 
                                W/W: <strong><?= number_format($friend['score_wladza_wolnosc'] ?? 0, 1) ?></strong> | 
                                P/K: <strong><?= number_format($friend['score_postep_konserwa'] ?? 0, 1) ?></strong> | 
                                G/N: <strong><?= number_format($friend['score_globalizm_nacjonalizm'] ?? 0, 1) ?></strong>
                            </small>
                        </div>

                        <span class="friend-description">
                            <?= htmlspecialchars($friend['description'] ?? 'Ten użytkownik nie dodał jeszcze opisu.'); ?>
                        </span>
                    </div>

                    <div class="friend-actions">
                        <a href="/chat?id=<?= $friend['id'] ?>" class="chat-btn">Napisz wiadomość</a>
                    </div>
                </li>
            <?php endforeach; ?>
        </ul>
    </div>



</body>
</html>